---
- name: Disable NetworkManager service
  service:
    name: NetworkManager
    enabled: no
    state: stopped
  when: ansible_distribution_version | version_compare('7', '>=')


- name: Enabled network service
  service:
    name: network
    enabled: yes
    state: started

- name: Remove NetworkManager package
  package:
    name: NetworkManager
    state: absent
  when: ansible_distribution_version | version_compare('7', '>=')

- name: Deactivate biosdevname for CentOS / RHEL 7
  shell: grubby --update-kernel=ALL --args="net.ifnames=0 biosdevname=0"
  when: ansible_distribution_version | version_compare('7', '>=')
