{% for interface in ansible_facts.interfaces %}
{% set interface_var = 'ansible_%s' | format(interface) %}
{% if  hostvars[inventory_hostname][interface_var] is defined
       and hostvars[inventory_hostname][interface_var]['ipv4'] is defined
       and hostvars[inventory_hostname][interface_var]['ipv4']['address'] is defined
       and hostvars[inventory_hostname][interface_var]['macaddress'] is defined %}
- {{ hostvars[inventory_hostname][interface_var]['ipv4']['address'] }}: {{ hostvars[inventory_hostname][interface_var]['macaddress'] }}
{% endif %}
{% endfor %}
